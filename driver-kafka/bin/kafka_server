#!/bin/bash

if [ "$#" -ne 1 ]; then
    echo "Error: Kafka directory is required."
    echo "Usage: $0 <kafka-directory>"
fi

KAFKA_DIR=$1

cd "$KAFKA_DIR" || { echo "Error: Could not enter $KAFKA_DIR."; exit 1; }

KAFKA_HEAP_OPTS="-Xms6g -Xmx6g -XX:MetaspaceSize=96m"
KAFKA_JVM_PERFORMANCE_OPTS="-server -XX:+UseG1GC -XX:MaxGCPauseMillis=20 -XX:InitiatingHeapOccupancyPercent=35 -XX:G1HeapRegionSize=16M -XX:MinMetaspaceFreeRatio=50 -XX:MaxMetaspaceFreeRatio=80 -Djava.awt.headless=true"

./bin/kafka-server-start.sh ./config/server.properties > ~/kafka-node1.log 2>&1
